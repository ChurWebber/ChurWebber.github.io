<!DOCTYPE html>
<html>
<head>
    <title>PSR规范 PSR-2 编码风格规范 // ChurWebber</title>

        <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="A blog about everything.">
    <meta name="keywords" content="">
    <meta name="author" content="">
        <meta property="og:title" content="PSR规范 PSR-2 编码风格规范" />
    <meta property="og:description" content="A blog about everything." />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="https://churwebber.github.io/post/psr-2/" />
    

    <link href="" rel="alternate" type="application/rss+xml" title="ChurWebber" />
    <link rel="shortcut icon" href="/favicon.png">

    <link href="https://churwebber.github.iowebfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
    <link href="https://churwebber.github.iowebfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="https://churwebber.github.iocss/style.css">

    <link href="http://gmpg.org/xfn/11" rel="profile">
    
    <meta name="generator" content="Hugo 0.42.1" />
</head>


<body>
<div id="container">
    <header id="header">
    <div id="header-outer" class="outer">
        <div id="header-inner" class="inner">
            <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
            <a id="logo" class="logo-text" href="https://churwebber.github.io">ChurWebber</a>
            <nav id="main-nav">
                
            </nav>
            <nav id="sub-nav">
                <div id="search-form-wrap">
                </div>
            </nav>
        </div>
    </div>
</header>
    <section id="main" class="outer">
        <article class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            <h1 class="article-title" itemprop="name">PSR规范 PSR-2 编码风格规范</h1>
        </header>
        
        <div class="article-meta">
            <a href="/post/psr-2/" class="article-date">
                <time datetime='2018-07-30T15:03:11.000&#43;00:00' itemprop="datePublished">2018-07-30</time>
            </a>
            
            
            <div class="post-categories">
                <div class="article-category">
                    
                    
                    <a class="article-category-link" href="https://churwebber.github.io/categories/php">PHP</a>
                    
                </div>
            </div>
            
            
            <div class="article-comment-link-wrap">
                <a href="/post/psr-2/#disqus_thread" class="article-comment-link">Comments</a>
            </div>
            
        </div>
        <div class="article-entry" itemprop="articleBody">
            <h1 id="编码风格指南">编码风格指南</h1>

<p>本篇规范是 [PSR-1][] 基本代码规范的继承与扩展。</p>

<p>本规范希望通过制定一系列规范化PHP代码的规则，以减少在浏览不同作者的代码时，因代码风格的不同而造成不便。</p>

<p>当多名程序员在多个项目中合作时，就需要一个共同的编码规范，</p>

<p>而本文中的风格规范源自于多个不同项目代码风格的共同特性，</p>

<p>因此，本规范的价值在于我们都遵循这个编码风格，而不是在于它本身。</p>

<p></p>

<h1 id="关于-能愿动词-的使用">关于「能愿动词」的使用</h1>

<p>为了避免歧义，文档大量使用了「能愿动词」，对应的解释如下：</p>

<ul>
<li><code>必须 (MUST)</code>：绝对，严格遵循，请照做，无条件遵守；</li>
<li><code>一定不可 (MUST NOT)</code>：禁令，严令禁止；</li>
<li><code>应该 (SHOULD)</code> ：强烈建议这样做，但是不强求；</li>
<li><code>不该 (SHOULD NOT)</code>：强烈不建议这样做，但是不强求；</li>
<li><code>可以 (MAY)</code> 和 <code>可选 (OPTIONAL)</code> ：选择性高一点，在这个文档内，此词语使用较少；</li>
</ul>

<blockquote>
<p>参见：<a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a></p>
</blockquote>

<h1 id="1-概览">1. 概览</h1>

<ul>
<li><p>代码 <strong>必须</strong> 遵循 [PSR-1]() 中的编码规范 。</p></li>

<li><p>代码 <strong>必须</strong> 使用4个空格符而不是「Tab 键」进行缩进。</p></li>

<li><p>每行的字符数 <strong>应该</strong> 软性保持在 80 个之内，理论上 <strong>一定不可</strong> 多于 120 个，但 <strong>一定不可</strong> 有硬性限制。</p></li>

<li><p>每个 <code>namespace</code> 命名空间声明语句和 <code>use</code> 声明语句块后面，必须 插入一个空白行。</p></li>

<li><p>类的开始花括号（<code>{</code>） <strong>必须</strong> 写在函数声明后自成一行，结束花括号（<code>}</code>）也 必须 写在函数主体后自成一行。</p></li>

<li><p>方法的开始花括号（<code>{</code>） <strong>必须</strong> 写在函数声明后自成一行，结束花括号（<code>}</code>）也 必须 写在函数主体后自成一行。</p></li>

<li><p>类的属性和方法 <strong>必须</strong> 添加访问修饰符（<code>private</code>、<code>protected</code> 以及 <code>public</code>），<code>abstract</code> 以及 <code>final</code> <strong>必须</strong> 声明在访问修饰符之前，而 <code>static</code> <strong>必须</strong> 声明在访问修饰符之后。</p></li>

<li><p>控制结构的关键字后 <strong>必须</strong> 要有一个空格符，而调用方法或函数时则 <strong>一定不可</strong> 有。</p></li>

<li><p>控制结构的开始花括号（<code>{</code>） <strong>必须</strong> 写在声明的同一行，而结束花括号（<code>}</code>） <strong>必须</strong> 写在主体后自成一行。</p></li>

<li><p>控制结构的开始左括号后和结束右括号前，都 <strong>一定不可</strong> 有空格符。</p></li>
</ul>

<h2 id="1-1-例子">1.1. 例子</h2>

<p>以下例子程序简单地展示了以上大部分规范：</p>
<div class="highlight"><pre class="chroma"><code class="language-PHP" data-lang="PHP"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">FooInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">BarClass</span> <span class="k">as</span> <span class="nx">Bar</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OtherVendor\OtherPackage\BazClass</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Foo</span> <span class="k">extends</span> <span class="nx">Bar</span> <span class="k">implements</span> <span class="nx">FooInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">sampleFunction</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$a</span> <span class="o">===</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">bar</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$a</span> <span class="o">&gt;</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$foo</span><span class="o">-&gt;</span><span class="na">bar</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">BazClass</span><span class="o">::</span><span class="na">bar</span><span class="p">(</span><span class="nv">$arg2</span><span class="p">,</span> <span class="nv">$arg3</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">final</span> <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">bar</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 方法的内容
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h1 id="2-通则">2. 通则</h1>

<h2 id="2-1-基本编码准则">2.1 基本编码准则</h2>

<p>代码 <strong>必须</strong> 符合 [PSR-1]() 中的所有规范。</p>

<h2 id="2-2-文件">2.2 文件</h2>

<p>所有PHP文件 <strong>必须</strong> 使用 <code>Unix LF (linefeed)</code> 作为行的结束符。</p>

<p>所有PHP文件 <strong>必须</strong> 以一个空白行作为结束。</p>

<p>纯PHP代码文件 <strong>必须</strong> 省略最后的 <code>?&gt;</code> 结束标签。</p>

<h2 id="2-3-行">2.3. 行</h2>

<p>行的长度 <strong>一定不可</strong> 有硬性的约束。</p>

<p>软性的长度约束 <strong>必须</strong> 要限制在 120 个字符以内，若超过此长度，带代码规范检查的编辑器 <strong>必须</strong> 要发出警告，不过 <strong>一定不可</strong> 发出错误提示。</p>

<p>每行 <strong>不该</strong> 多于80个字符，大于80字符的行 <strong>应该</strong> 折成多行。</p>

<p>非空行后 <strong>一定不可</strong> 有多余的空格符。</p>

<p>空行 <strong>可以</strong> 使得阅读代码更加方便以及有助于代码的分块。</p>

<p>每行 <strong>一定不可</strong> 存在多于一条语句。</p>

<h2 id="2-4-缩进">2.4. 缩进</h2>

<p>代码 <strong>必须</strong> 使用4个空格符的缩进，<strong>一定不可</strong> 用 tab键。</p>

<blockquote>
<p>备注：使用空格而不是「tab键缩进」的好处在于，
避免在比较代码差异、打补丁、重阅代码以及注释时产生混淆。
并且，使用空格缩进，让对齐变得更方便。</p>
</blockquote>

<h2 id="2-5-关键字-以及-true-false-null">2.5. 关键字 以及 True/False/Null</h2>

<p>PHP所有 <code>关键字</code> <strong>必须</strong> 全部小写。</p>

<p>常量 <code>true</code> 、<code>false</code> 和 <code>null</code> 也 <strong>必须</strong> 全部小写。</p>

<h1 id="3-namespace-以及-use-声明">3. namespace 以及 use 声明</h1>

<p><code>namespace</code> 声明后 <strong>必须</strong> 插入一个空白行。</p>

<p>所有 <code>use</code> <strong>必须</strong> 在 <code>namespace</code> 后声明。</p>

<p>每条 <code>use</code> 声明语句 <strong>必须</strong> 只有一个 <code>use</code> 关键词。</p>

<p><code>use</code> 声明语句块后 <strong>必须</strong> 要有一个空白行。</p>

<p>例如：</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">FooClass</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">BarClass</span> <span class="k">as</span> <span class="nx">Bar</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OtherVendor\OtherPackage\BazClass</span><span class="p">;</span>

<span class="c1">// ... 更多的 PHP 代码在这里 ...
</span><span class="c1"></span></code></pre></div>
<h1 id="4-类-属性和方法">4. 类、属性和方法</h1>

<p>此处的「类」泛指所有的「class类」、「接口」以及「traits 可复用代码块」。</p>

<h2 id="4-1-扩展与继承">4.1. 扩展与继承</h2>

<p>关键词 <code>extends</code> 和 <code>implements</code> <strong>必须</strong> 写在类名称的同一行。</p>

<p>类的开始花括号 <strong>必须</strong> 独占一行，结束花括号也 <strong>必须</strong> 在类主体后独占一行。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">FooClass</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">BarClass</span> <span class="k">as</span> <span class="nx">Bar</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OtherVendor\OtherPackage\BazClass</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ClassName</span> <span class="k">extends</span> <span class="nx">ParentClass</span> <span class="k">implements</span> <span class="nx">\ArrayAccess</span><span class="p">,</span> <span class="nx">\Countable</span>
<span class="p">{</span>
    <span class="c1">// 这里面是常量、属性、类方法
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<p><code>implements</code> 的继承列表也 <strong>可以</strong> 分成多行，这样的话，每个继承接口名称都 <strong>必须</strong> 分开独立成行，包括第一个。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">FooClass</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">BarClass</span> <span class="k">as</span> <span class="nx">Bar</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OtherVendor\OtherPackage\BazClass</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ClassName</span> <span class="k">extends</span> <span class="nx">ParentClass</span> <span class="k">implements</span>
    <span class="nx">\ArrayAccess</span><span class="p">,</span>
    <span class="nx">\Countable</span><span class="p">,</span>
    <span class="nx">\Serializable</span>
<span class="p">{</span>
    <span class="c1">// 这里面是常量、属性、类方法
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<h2 id="4-2-属性">4.2. 属性</h2>

<p>每个属性都 <strong>必须</strong> 添加访问修饰符。</p>

<p><strong>一定不可</strong> 使用关键字 <code>var</code> 声明一个属性。</p>

<p>每条语句 <strong>一定不可</strong> 定义超过一个属性。</p>

<p><strong>不该</strong> 使用下划线作为前缀，来区分属性是 protected 或 private。</p>

<p>以下是属性声明的一个范例：</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ClassName</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$foo</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="4-3-方法">4.3. 方法</h2>

<p>所有方法都 <strong>必须</strong> 添加访问修饰符。</p>

<p><strong>不该</strong> 使用下划线作为前缀，来区分方法是 protected 或 private。</p>

<p>方法名称后 <strong>一定不可</strong> 有空格符，其开始花括号 <strong>必须</strong> 独占一行，结束花括号也 <strong>必须</strong> 在方法主体后单独成一行。参数左括号后和右括号前 <strong>一定不可</strong> 有空格。</p>

<p>一个标准的方法声明可参照以下范例，留意其括号、逗号、空格以及花括号的位置。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ClassName</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">fooBarBaz</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$arg2</span><span class="p">,</span> <span class="nv">$arg3</span> <span class="o">=</span> <span class="p">[])</span>
    <span class="p">{</span>
        <span class="c1">// method body
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="4-4-方法的参数">4.4. 方法的参数</h2>

<p>参数列表中，每个逗号后面 <strong>必须</strong> 要有一个空格，而逗号前面 <strong>一定不可</strong> 有空格。</p>

<p>有默认值的参数，<strong>必须</strong> 放到参数列表的末尾。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ClassName</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">foo</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$arg2</span><span class="p">,</span> <span class="nv">$arg3</span> <span class="o">=</span> <span class="p">[])</span>
    <span class="p">{</span>
        <span class="c1">// method body
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>参数列表 <strong>可以</strong> 分列成多行，这样，包括第一个参数在内的每个参数都 <strong>必须</strong> 单独成行。</p>

<p>拆分成多行的参数列表后，结束括号以及方法开始花括号 <strong>必须</strong> 写在同一行，中间用一个空格分隔。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ClassName</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">aVeryLongMethodName</span><span class="p">(</span>
        <span class="nx">ClassTypeHint</span> <span class="nv">$arg1</span><span class="p">,</span>
        <span class="o">&amp;</span><span class="nv">$arg2</span><span class="p">,</span>
        <span class="k">array</span> <span class="nv">$arg3</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 方法的内容
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="4-5-abstract-final-以及-static">4.5. <code>abstract</code> 、 <code>final</code> 、 以及 <code>static</code></h2>

<p>需要添加 <code>abstract</code> 或 <code>final</code> 声明时，<strong>必须</strong> 写在访问修饰符前，而 <code>static</code> 则 <strong>必须</strong> 写在其后。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Vendor\Package</span><span class="p">;</span>

<span class="k">abstract</span> <span class="k">class</span> <span class="nc">ClassName</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">static</span> <span class="nv">$foo</span><span class="p">;</span>

    <span class="k">abstract</span> <span class="k">protected</span> <span class="k">function</span> <span class="nf">zim</span><span class="p">();</span>

    <span class="k">final</span> <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">bar</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// method body
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="4-6-方法及函数调用">4.6. 方法及函数调用</h2>

<p>方法及函数调用时，方法名或函数名与参数左括号之间 <strong>一定不可</strong> 有空格，参数右括号前也 <strong>一定不可</strong> 有空格。每个参数前 <strong>一定不可</strong> 有空格，但其后 <strong>必须</strong> 有一个空格。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nx">bar</span><span class="p">();</span>
<span class="nv">$foo</span><span class="o">-&gt;</span><span class="na">bar</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">);</span>
<span class="nx">Foo</span><span class="o">::</span><span class="na">bar</span><span class="p">(</span><span class="nv">$arg2</span><span class="p">,</span> <span class="nv">$arg3</span><span class="p">);</span>
</code></pre></div>
<p>参数 <strong>可以</strong> 分列成多行，此时包括第一个参数在内的每个参数都 <strong>必须</strong> 单独成行。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$foo</span><span class="o">-&gt;</span><span class="na">bar</span><span class="p">(</span>
    <span class="nv">$longArgument</span><span class="p">,</span>
    <span class="nv">$longerArgument</span><span class="p">,</span>
    <span class="nv">$muchLongerArgument</span>
<span class="p">);</span>
</code></pre></div>
<h1 id="5-控制结构">5. 控制结构</h1>

<p>控制结构的基本规范如下：</p>

<ul>
<li><p>控制结构关键词后 <strong>必须</strong> 有一个空格。</p></li>

<li><p>左括号 <code>(</code> 后 <strong>一定不可</strong> 有空格。</p></li>

<li><p>右括号 <code>)</code> 前也 <strong>一定不可</strong> 有空格。</p></li>

<li><p>右括号 <code>)</code> 与开始花括号 <code>{</code> 间 <strong>必须</strong> 有一个空格。</p></li>

<li><p>结构体主体 <strong>必须</strong> 要有一次缩进。</p></li>

<li><p>结束花括号 <code>}</code> <strong>必须</strong> 在结构体主体后单独成行。</p></li>
</ul>

<p>每个结构体的主体都 <strong>必须</strong> 被包含在成对的花括号之中，
这能让结构体更加结构话，以及减少加入新行时，出错的可能性。</p>

<h2 id="5-1-if-elseif-和-else">5.1. <code>if</code> 、<code>elseif</code> 和 <code>else</code></h2>

<p>标准的 <code>if</code> 结构如下代码所示，请留意「括号」、「空格」以及「花括号」的位置，
注意 <code>else</code> 和 <code>elseif</code> 都与前面的结束花括号在同一行。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$expr1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// if body
</span><span class="c1"></span><span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$expr2</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// elseif body
</span><span class="c1"></span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// else body;
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<p><strong>应该</strong> 使用关键词 <code>elseif</code> 代替所有 <code>else if</code>，以使得所有的控制关键字都像是单独的一个词。</p>

<h2 id="5-2-switch-和-case">5.2. <code>switch</code> 和 <code>case</code></h2>

<p>标准的 <code>switch</code> 结构如下代码所示，留意括号、空格以及花括号的位置。</p>

<p><code>case</code> 语句 <strong>必须</strong> 相对 <code>switch</code> 进行一次缩进，而 <code>break</code> 语句以及 <code>case</code> 内的其它语句都 <strong>必须</strong> 相对 <code>case</code> 进行一次缩进。</p>

<p>如果存在非空的 <code>case</code> 直穿语句，主体里 <strong>必须</strong> 有类似 <code>// no break</code> 的注释。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">switch</span> <span class="p">(</span><span class="nv">$expr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
        <span class="k">echo</span> <span class="s1">&#39;First case, with a break&#39;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
        <span class="k">echo</span> <span class="s1">&#39;Second case, which falls through&#39;</span><span class="p">;</span>
        <span class="c1">// no break
</span><span class="c1"></span>    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
        <span class="k">echo</span> <span class="s1">&#39;Third case, return instead of break&#39;</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span>
        <span class="k">echo</span> <span class="s1">&#39;Default case&#39;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="5-3-while-和-do-while">5.3. <code>while</code> 和 <code>do while</code></h2>

<p>一个规范的 <code>while</code> 语句应该如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">while</span> <span class="p">(</span><span class="nv">$expr</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// structure body
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<p>标准的 <code>do while</code> 语句如下所示，同样的，注意其「括号」、「空格」以及「花括号」的位置。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="c1">// structure body;
</span><span class="c1"></span><span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$expr</span><span class="p">);</span>
</code></pre></div>
<h2 id="5-4-for">5.4. <code>for</code></h2>

<p>标准的 <code>for</code> 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// for body
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<h2 id="5-5-foreach">5.5. <code>foreach</code></h2>

<p>标准的 <code>foreach</code> 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$iterable</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// foreach body
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<h2 id="5-6-try-catch">5.6. <code>try</code>, <code>catch</code></h2>

<p>标准的 <code>try catch</code> 语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="c1">// try body
</span><span class="c1"></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">FirstExceptionType</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// catch body
</span><span class="c1"></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">OtherExceptionType</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// catch body
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<h1 id="6-闭包">6. 闭包</h1>

<p>闭包声明时，关键词 <code>function</code> 后以及关键词 <code>use</code> 的前后都 <strong>必须</strong> 要有一个空格。</p>

<p>开始花括号 <strong>必须</strong> 写在声明的同一行，结束花括号 <strong>必须</strong> 紧跟主体结束的下一行。</p>

<p>参数列表和变量列表的左括号后以及右括号前，<strong>一定不可</strong> 有空格。</p>

<p>参数和变量列表中，逗号前 <strong>一定不可</strong> 有空格，而逗号后 <strong>必须</strong> 要有空格。</p>

<p>闭包中有默认值的参数 <strong>必须</strong> 放到列表的后面。</p>

<p>标准的闭包声明语句如下所示，注意其「括号」、「空格」以及「花括号」的位置。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$closureWithArgs</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// body
</span><span class="c1"></span><span class="p">};</span>

<span class="nv">$closureWithArgsAndVars</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$var1</span><span class="p">,</span> <span class="nv">$var2</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// body
</span><span class="c1"></span><span class="p">};</span>
</code></pre></div>
<p>参数列表以及变量列表 <strong>可以</strong> 分成多行，这样，包括第一个在内的每个参数或变量都 <strong>必须</strong> 单独成行，而列表的右括号与闭包的开始花括号 <strong>必须</strong> 放在同一行。</p>

<p>以下几个例子，包含了参数和变量列表被分成多行的多情况。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$longArgs_noVars</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span>
    <span class="nv">$longArgument</span><span class="p">,</span>
    <span class="nv">$longerArgument</span><span class="p">,</span>
    <span class="nv">$muchLongerArgument</span>
<span class="p">)</span> <span class="p">{</span>
   <span class="c1">// body
</span><span class="c1"></span><span class="p">};</span>

<span class="nv">$noArgs_longVars</span> <span class="o">=</span> <span class="k">function</span> <span class="p">()</span> <span class="k">use</span> <span class="p">(</span>
    <span class="nv">$longVar1</span><span class="p">,</span>
    <span class="nv">$longerVar2</span><span class="p">,</span>
    <span class="nv">$muchLongerVar3</span>
<span class="p">)</span> <span class="p">{</span>
   <span class="c1">// body
</span><span class="c1"></span><span class="p">};</span>

<span class="nv">$longArgs_longVars</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span>
    <span class="nv">$longArgument</span><span class="p">,</span>
    <span class="nv">$longerArgument</span><span class="p">,</span>
    <span class="nv">$muchLongerArgument</span>
<span class="p">)</span> <span class="k">use</span> <span class="p">(</span>
    <span class="nv">$longVar1</span><span class="p">,</span>
    <span class="nv">$longerVar2</span><span class="p">,</span>
    <span class="nv">$muchLongerVar3</span>
<span class="p">)</span> <span class="p">{</span>
   <span class="c1">// body
</span><span class="c1"></span><span class="p">};</span>

<span class="nv">$longArgs_shortVars</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span>
    <span class="nv">$longArgument</span><span class="p">,</span>
    <span class="nv">$longerArgument</span><span class="p">,</span>
    <span class="nv">$muchLongerArgument</span>
<span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$var1</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">// body
</span><span class="c1"></span><span class="p">};</span>

<span class="nv">$shortArgs_longVars</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$arg</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span>
    <span class="nv">$longVar1</span><span class="p">,</span>
    <span class="nv">$longerVar2</span><span class="p">,</span>
    <span class="nv">$muchLongerVar3</span>
<span class="p">)</span> <span class="p">{</span>
   <span class="c1">// body
</span><span class="c1"></span><span class="p">};</span>
</code></pre></div>
<p>注意，闭包被直接用作函数或方法调用的参数时，以上规则仍然适用。</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$foo</span><span class="o">-&gt;</span><span class="na">bar</span><span class="p">(</span>
    <span class="nv">$arg1</span><span class="p">,</span>
    <span class="k">function</span> <span class="p">(</span><span class="nv">$arg2</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$var1</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// body
</span><span class="c1"></span>    <span class="p">},</span>
    <span class="nv">$arg3</span>
<span class="p">);</span>
</code></pre></div>
<h1 id="7-总结">7. 总结</h1>

<p>以上规范难免有疏忽，其中包括但不仅限于：</p>

<ul>
<li><p>全局变量和常量的定义</p></li>

<li><p>函数的定义</p></li>

<li><p>操作符和赋值</p></li>

<li><p>行内对齐</p></li>

<li><p>注释和文档描述块</p></li>

<li><p>类名的前缀及后缀</p></li>

<li><p>最佳实践</p></li>
</ul>

<p>本规范之后的修订与扩展将弥补以上不足。</p>
        </div>

        
        
        <div class="article-toc" >
            <h3>Contents</h3>
            <nav id="TableOfContents">
<ul>
<li><a href="#编码风格指南">编码风格指南</a></li>
<li><a href="#关于-能愿动词-的使用">关于「能愿动词」的使用</a></li>
<li><a href="#1-概览">1. 概览</a>
<ul>
<li><a href="#1-1-例子">1.1. 例子</a></li>
</ul></li>
<li><a href="#2-通则">2. 通则</a>
<ul>
<li><a href="#2-1-基本编码准则">2.1 基本编码准则</a></li>
<li><a href="#2-2-文件">2.2 文件</a></li>
<li><a href="#2-3-行">2.3. 行</a></li>
<li><a href="#2-4-缩进">2.4. 缩进</a></li>
<li><a href="#2-5-关键字-以及-true-false-null">2.5. 关键字 以及 True/False/Null</a></li>
</ul></li>
<li><a href="#3-namespace-以及-use-声明">3. namespace 以及 use 声明</a></li>
<li><a href="#4-类-属性和方法">4. 类、属性和方法</a>
<ul>
<li><a href="#4-1-扩展与继承">4.1. 扩展与继承</a></li>
<li><a href="#4-2-属性">4.2. 属性</a></li>
<li><a href="#4-3-方法">4.3. 方法</a></li>
<li><a href="#4-4-方法的参数">4.4. 方法的参数</a></li>
<li><a href="#4-5-abstract-final-以及-static">4.5. <code>abstract</code> 、 <code>final</code> 、 以及 <code>static</code></a></li>
<li><a href="#4-6-方法及函数调用">4.6. 方法及函数调用</a></li>
</ul></li>
<li><a href="#5-控制结构">5. 控制结构</a>
<ul>
<li><a href="#5-1-if-elseif-和-else">5.1. <code>if</code> 、<code>elseif</code> 和 <code>else</code></a></li>
<li><a href="#5-2-switch-和-case">5.2. <code>switch</code> 和 <code>case</code></a></li>
<li><a href="#5-3-while-和-do-while">5.3. <code>while</code> 和 <code>do while</code></a></li>
<li><a href="#5-4-for">5.4. <code>for</code></a></li>
<li><a href="#5-5-foreach">5.5. <code>foreach</code></a></li>
<li><a href="#5-6-try-catch">5.6. <code>try</code>, <code>catch</code></a></li>
</ul></li>
<li><a href="#6-闭包">6. 闭包</a></li>
<li><a href="#7-总结">7. 总结</a></li>
</ul>
</nav>
        </div>
        
        

        


        
        <footer class="article-footer">
            <ul class="article-tag-list">
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="https://churwebber.github.io/tags/psr">PSR
                    </a>
                </li>
                
            </ul>
        </footer>
        
    </div>
    <nav id="article-nav">
    
    
    <a href="/post/psr-1/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">PSR规范 PSR-1 基础编码规范&nbsp;<span>&gt;</span></div>
    </a>
    
</nav>
</article>

        
            
        
    </section>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2018
        </div>
    </div>
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css" integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script>
        document.getElementById('main-nav-toggle').addEventListener('click', function () {
            var header = document.getElementById('header');
            if (header.classList.contains('mobile-on')) {
                header.classList.remove('mobile-on');
            } else {
                header.classList.add('mobile-on');
            }
        });
    </script>
</footer>
</div>
</body>
</html>
